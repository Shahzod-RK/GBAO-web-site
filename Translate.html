<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Кастомный переводчик</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 10px;
    background-image: url(Traback.png);
    display: flex;
    flex-direction: column;
    align-items: center;
    background-repeat: no-repeat;
    background-size: cover;
}

.container {
    width: 100%;
    max-width: 480px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.language-selectors {
    display: flex;
    justify-content: space-between;
    gap: 10px;
}

.language-selectors select {
    flex: 1;
    padding: 8px;
    font-size: 14px;
    border-radius: 100px;
    border: 1px solid #ccc;
}

textarea {
    width: 95%;
    font-size: 14px;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    resize: none;
    min-height: 120px;
}

button {
    width: 100%;
    padding: 12px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    background-color: #4285F4;
    color: #fff;
    cursor: pointer;
    margin-top: 5px;
}

button:hover {
    background-color: #3367D6;
}

.block {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.output {
    background: #fff;
    overflow-y: auto;
    white-space: pre-wrap;
}

@media(max-width: 360px){
    textarea { font-size: 12px; padding: 8px; min-height: 100px; }
    select { font-size: 12px; padding: 6px; }
    button { font-size: 14px; padding: 10px; }
}
</style>
</head>
<body>

<div class="container">
  <div class="block">
    <div class="language-selectors">
      <select id="sourceLang">
        <option value="russian">Русский</option>
        <option value="dialect1">Шуганский диалект</option>
        <option value="dialect2">upcoming soon</option>
      </select>
      <select id="targetLang">
        <option value="russian">Русский</option>
        <option value="dialect1">Шуганский диалект</option>
        <option value="dialect2">upcoming soon</option>
      </select>
    </div>
    <textarea id="inputText" placeholder="Введите текст..."></textarea>
  </div>

  <button onclick="translateText()">Перевести</button>

  <div class="block">
    <textarea id="outputText" readonly class="output" placeholder="Перевод будет здесь..."></textarea>
  </div>
</div>

<script>
// ====== Словарь ======
const dictionary = {
    "hello" : { "russian": "привет", "dialect1": "Salum", "dialect2": ""},
    "How_are_you" : { "russian": "как дела", "dialect1": "Carang", "dialect2": ""},
    "What_are_you_doing" : { "russian": "что делаешь", "dialect1": "chireta", "dialect2": ""},
    
    "i": { "russian": "я", "dialect1": "oz", "dialect2": "" },
    "you_sg": { "russian": "ты", "dialect1": "to", "dialect2": "" },
    "he": { "russian": "он", "dialect1": "йo", "dialect2": "" },
    "she": { "russian": "она", "dialect1": "ya", "dialect2": "" },
    "we": { "russian": "мы", "dialect1": "mash", "dialect2": "" },
    "you_pl": { "russian": "вы", "dialect1": "tama", "dialect2": "" },
    "they": { "russian": "они", "dialect1": "wath", "dialect2": "" },

    "this_is": { "russian": "это", "dialect1": "эd", "dialect2": "" },
    "that": { "russian": "тот", "dialect1": "yo", "dialect2": "" },
    "this": { "russian": "этот", "dialect1": "ed", "dialect2": "" },

    "such": { "russian": "такой", "dialect1": "desga", "dialect2": "" },
    "which": { "russian": "какой", "dialect1": "цarangen", "dialect2": "" },
    "who": { "russian": "кто", "dialect1": "chaй", "dialect2": "" },
    "what": { "russian": "что", "dialect1": "chiz", "dialect2": "" },
    "where": { "russian": "где", "dialect1": "kaй", "dialect2": "" },
    "when": { "russian": "когда", "dialect1": "цawaxt", "dialect2": "" },
    "why": { "russian": "почему", "dialect1": "chizҷat", "dialect2": "" },
    "why_for": { "russian": "зачем", "dialect1": "chizҷat", "dialect2": "" },
    "how": { "russian": "как", "dialect1": "цarang", "dialect2": "" },

    "all": { "russian": "весь", "dialect1": "fok", "dialect2": "" },
    "each": { "russian": "каждый", "dialect1": "archaйath", "dialect2": "" },
    "other": { "russian": "другой", "dialect1": "ega", "dialect2": "" },
    "same_other": { "russian": "иной", "dialect1": "ega", "dialect2": "" },

    "most": { "russian": "самый", "dialect1": "sar", "dialect2": "" },
    "new": { "russian": "новый", "dialect1": "naw", "dialect2": "" },
    "old": { "russian": "старый", "dialect1": "kina", "dialect2": "" },
    "big": { "russian": "большой", "dialect1": "г-ola", "dialect2": "" },
    "small": { "russian": "маленький", "dialect1": "dzolek", "dialect2": "" },
    "good": { "russian": "хороший", "dialect1": "zyr", "dialect2": "" },
    "bad": { "russian": "плохой", "dialect1": "bedarak", "dialect2": "" },

    "first": { "russian": "первый", "dialect1": "yakom", "dialect2": "" },
    "last": { "russian": "последний", "dialect1": "oxiry-nom", "dialect2": "" },
    "early": { "russian": "ранний", "dialect1": "peroke", "dialect2": "" },
    "late": { "russian": "поздний", "dialect1": "der", "dialect2": "" },

    "many": { "russian": "много", "dialect1": "lap", "dialect2": "" },
    "few": { "russian": "мало", "dialect1": "dys", "dialect2": "" },
    "several": { "russian": "несколько", "dialect1": "dysath", "dialect2": "" },

    "one": { "russian": "один", "dialect1": "iw", "dialect2": "" },
    "two": { "russian": "два", "dialect1": "thoйy-n", "dialect2": "" },
    "three": { "russian": "три", "dialect1": "araй", "dialect2": "" },
    "four": { "russian": "четыре", "dialect1": "цavor", "dialect2": "" },
    "five": { "russian": "пять", "dialect1": "pinz", "dialect2": "" },
    "six": { "russian": "шесть", "dialect1": "ghogh", "dialect2": "" },
    "seven": { "russian": "семь", "dialect1": "yvd", "dialect2": "" },
    "eight": { "russian": "восемь", "dialect1": "vaght", "dialect2": "" },
    "nine": { "russian": "девять", "dialect1": "now", "dialect2": "" },
    "ten": { "russian": "десять", "dialect1": "this", "dialect2": "" },

    "still": { "russian": "ещё", "dialect1": "dysga", "dialect2": "" },

    "month": { "russian": "месяц", "dialect1": "mest", "dialect2": "" },
    "week": { "russian": "неделя", "dialect1": "afta", "dialect2": "" },
    "hour": { "russian": "час", "dialect1": "soat", "dialect2": "" },
    "minute": { "russian": "минута", "dialect1": "minyt", "dialect2": "" },
    "second": { "russian": "секунда", "dialect1": "secynd", "dialect2": "" },

    "person": { "russian": "человек", "dialect1": "odam", "dialect2": "" },
    "people": { "russian": "люди", "dialect1": "odamen", "dialect2": "" },

    "man": { "russian": "мужчина", "dialect1": "chorek", "dialect2": "" },
    "woman": { "russian": "женщина", "dialect1": "ghenek", "dialect2": "" },
    "child": { "russian": "ребёнок", "dialect1": "dzolekak", "dialect2": "" },

    "friend_male": { "russian": "друг", "dialect1": "oghno", "dialect2": "" },
    "friend_female": { "russian": "подруга", "dialect1": "oghno", "dialect2": "" },

    "family": { "russian": "семья", "dialect1": "semya", "dialect2": "" },
    "mother": { "russian": "мама", "dialect1": "nan", "dialect2": "" },
    "father": { "russian": "папа", "dialect1": "tat", "dialect2": "" },
    "brother": { "russian": "брат", "dialect1": "verod", "dialect2": "" },
    "sister": { "russian": "сестра", "dialect1": "йax", "dialect2": "" },

    "son": { "russian": "сын", "dialect1": "poц", "dialect2": "" },
    "daughter": { "russian": "дочь", "dialect1": "rezin", "dialect2": "" },

    "life": { "russian": "жизнь", "dialect1": "zindage", "dialect2": "" },

    "head": { "russian": "голова", "dialect1": "kil", "dialect2": "" },
    "hand": { "russian": "рука", "dialect1": "thost", "dialect2": "" },
    "leg": { "russian": "нога", "dialect1": "poth", "dialect2": "" },
    "eye": { "russian": "глаз", "dialect1": "цem", "dialect2": "" },
    "face": { "russian": "лицо", "dialect1": "piц", "dialect2": "" },
    "body": { "russian": "тело", "dialect1": "telo", "dialect2": "" },

    "house": { "russian": "дом", "dialect1": "chid", "dialect2": "" },
    "apartment": { "russian": "квартира", "dialect1": "chid", "dialect2": "" },
    "room": { "russian": "комната", "dialect1": "mala", "dialect2": "" },

    "street": { "russian": "улица", "dialect1": "dargo", "dialect2": "" },
    "city": { "russian": "город", "dialect1": "shar", "dialect2": "" },
    "country": { "russian": "страна", "dialect1": "shar", "dialect2": "" },

    "place": { "russian": "место", "dialect1": "joй", "dialect2": "" },
    "world": { "russian": "мир", "dialect1": "zamin", "dialect2": "" },
    "earth": { "russian": "земля", "dialect1": "zamin", "dialect2": "" },

    "school": { "russian": "школа", "dialect1": "maktab", "dialect2": "" },
    "university": { "russian": "университет", "dialect1": "", "dialect2": "" },

    "work": { "russian": "работа", "dialect1": "kor", "dialect2": "" },
    "task": { "russian": "задача", "dialect1": "misol", "dialect2": "" },
    "question": { "russian": "вопрос", "dialect1": "savol", "dialect2": "" },
    "answer": { "russian": "ответ", "dialect1": "otvet", "dialect2": "" },

    "thought": { "russian": "мысль", "dialect1": "fikr", "dialect2": "" },
    "idea": { "russian": "идея", "dialect1": "ideйa", "dialect2": "" },

    "word": { "russian": "слово", "dialect1": "gap", "dialect2": "" },
    "language": { "russian": "язык", "dialect1": "zev", "dialect2": "" },

    "book": { "russian": "книга", "dialect1": "kitob", "dialect2": "" },
    "notebook": { "russian": "тетрадь", "dialect1": "daftar", "dialect2": "" },
    "letter": { "russian": "письмо", "dialect1": "pismo", "dialect2": "" },
    "newspaper": { "russian": "газета", "dialect1": "gazet", "dialect2": "" },

    "internet": { "russian": "интернет", "dialect1": "internet", "dialect2": "" },
    "phone": { "russian": "телефон", "dialect1": "telefoy-n", "dialect2": "" },
    "computer": { "russian": "компьютер", "dialect1": "kompюter", "dialect2": "" },

    "game": { "russian": "игра", "dialect1": "boze", "dialect2": "" },
    "music": { "russian": "музыка", "dialect1": "soz", "dialect2": "" },
    "movie": { "russian": "фильм", "dialect1": "kino", "dialect2": "" },

    "program": { "russian": "программа", "dialect1": "pragrama", "dialect2": "" },
    "project": { "russian": "проект", "dialect1": "proect", "dialect2": "" },

    "water": { "russian": "вода", "dialect1": "ghaц", "dialect2": "" },
    "air": { "russian": "воздух", "dialect1": "avo", "dialect2": "" },
    "fire": { "russian": "огонь", "dialect1": "йoц", "dialect2": "" },
    "soil": { "russian": "земля", "dialect1": "zamin", "dialect2": "" },

    "tree": { "russian": "дерево", "dialect1": "daraxt", "dialect2": "" },
    "plant": { "russian": "растение", "dialect1": "sabzavot", "dialect2": "" },
    "flower": { "russian": "цветок", "dialect1": "gul", "dialect2": "" },
    "animal": { "russian": "животное", "dialect1": "aйvy-n", "dialect2": "" }
    
    

};

// ====== Сохранение заглавной буквы ======
function matchCapitalization(orig, translated) {
    if (!orig || !translated) return translated;
    if (orig[0] !== orig[0].toLowerCase()) {
        return translated[0].toUpperCase() + translated.slice(1);
    }
    return translated;
}

// ====== Перевод слова ======
function translateWordToken(word, sourceLang, targetLang) {
    const lower = word.toLowerCase();
    for (const key in dictionary) {
        const entry = dictionary[key];
        if (entry[sourceLang] && entry[targetLang] &&
            entry[sourceLang].toLowerCase() === lower) {
            return matchCapitalization(word, entry[targetLang]);
        }
    }
    return word;
}

// ====== Основная функция перевода ======
function translateText() {
    const inputEl = document.getElementById("inputText");
    const outputEl = document.getElementById("outputText");
    let text = inputEl.value;
    const sourceLang = document.getElementById("sourceLang").value;
    const targetLang = document.getElementById("targetLang").value;

    if (!text.trim()) {
        outputEl.value = "";
        return;
    }

    // 1️⃣ Защита фраз
    const protectedPhrases = [];
    let index = 0;

    for (const key in dictionary) {
        const entry = dictionary[key];
        const src = entry[sourceLang];
        const trg = entry[targetLang];

        if (src && trg && src.includes(" ")) {
            const escaped = src.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
            const regex = new RegExp(`(^|\\s|[.,!?])${escaped}(?=\\s|$|[.,!?])`, "giu");

            text = text.replace(regex, (match, p1) => {
                const token = `@@@${index}@@@`;
                protectedPhrases.push(matchCapitalization(match.trim(), trg));
                index++;
                return (p1 || "") + token;
            });
        }
    }

    // 2️⃣ Перевод оставшихся слов
    text = text.replace(/\p{L}+/gu, (match) => {
        return translateWordToken(match, sourceLang, targetLang);
    });

    // 3️⃣ Вставка фраз обратно
    protectedPhrases.forEach((phrase, i) => {
        const token = `@@@${i}@@@`;
        text = text.replace(token, phrase);
    });

    outputEl.value = text;
}
</script>

</body>
</html>
